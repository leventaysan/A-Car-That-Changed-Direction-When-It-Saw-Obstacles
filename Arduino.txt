#define echoPin 12 //Ultrasonik sensörün echo pini Arduino'nun 12.pinine
#define trigPin 13 //Ultrasonik sensörün trig pini Arduino'nun 13.pinine tanýmlandý.
#define MotorR1 7
#define MotorR2 6
#define MotorRE 9 // Motor pinlerini tanýmlýyoruz.
#define MotorL1 5
#define MotorL2 4
#define MotorLE 3

long sure, uzaklik; //süre ve uzaklýk diye iki deðiþken tanýmlýyoruz.

void setup() {
// ultrasonik sensör Trig pininden ses dalgalarý gönderdiði için OUTPUT (Çýkýþ),
// bu dalgalarý Echo pini ile geri aldýðý için INPUT (Giriþ) olarak tanýmlanýr.
pinMode(echoPin, INPUT);
pinMode(trigPin, OUTPUT);
pinMode(MotorL1, OUTPUT);
pinMode(MotorL2, OUTPUT);
pinMode(MotorLE, OUTPUT); //Motorlarýmýzý çýkýþ olarak tanýmlýyoruz.
pinMode(MotorR1, OUTPUT);
pinMode(MotorR2, OUTPUT);
pinMode(MotorRE, OUTPUT);
Serial.begin(9600);
}

void loop() {
digitalWrite(trigPin, LOW); //sensör pasif hale getirildi
delayMicroseconds(5);
digitalWrite(trigPin, HIGH); //Sensore ses dalgasýnýn üretmesi için emir verildi
delayMicroseconds(10);
digitalWrite(trigPin, LOW); //Yeni dalgalarýn üretilmemesi için trig pini LOW konumuna getirildi
sure = pulseIn(echoPin, HIGH); //ses dalgasýnýn geri dönmesi için geçen sure ölçülüyor
uzaklik = sure / 29.1 / 2; //ölçülen süre uzaklýða çevriliyor
Serial.println(uzaklik);
if (uzaklik < 15) // Uzaklýk 15'den küçük ise,
{
geri(); // 150 ms geri git
delay(750);
}
else { // deðil ise,
ileri(); // ileri git
}
}

void ileri(){ // Robotun ileri yönde hareketi için fonksiyon tanýmlýyoruz.
digitalWrite(MotorR1, HIGH); // Sað motorun ileri hareketi aktif
digitalWrite(MotorR2, LOW); // Sað motorun geri hareketi pasif
analogWrite(MotorRE, 150); // Sað motorun hýzý 150
digitalWrite(MotorL1, HIGH); // Sol motorun ileri hareketi aktif
digitalWrite(MotorL2, LOW); // Sol motorun geri hareketi pasif
analogWrite(MotorLE, 150); // Sol motorun hýzý 150
}

void sag(){ // Robotun saða dönme hareketi için fonksiyon tanýmlýyoruz.
digitalWrite(MotorR1, HIGH); // Sað motorun ileri hareketi aktif
digitalWrite(MotorR2, LOW); // Sað motorun geri hareketi pasif
analogWrite(MotorRE, 0); // Sað motorun hýzý 0 (Motor duruyor)
digitalWrite(MotorL1, LOW); // Sol motorun ileri hareketi aktif
digitalWrite(MotorL2, HIGH); // Sol motorun geri hareketi pasif
analogWrite(MotorLE, 150); // Sol motorun hýzý 150
}

void geri(){ // Robotun geri yönde hareketi için fonksiyon tanýmlýyoruz.
digitalWrite(MotorR1, LOW); // Sað motorun ileri hareketi pasif
digitalWrite(MotorR2, HIGH); // Sað motorun geri hareketi aktif
analogWrite(MotorRE, 150); // Sað motorun hýzý 150
digitalWrite(MotorL1, HIGH); // Sol motorun ileri hareketi pasif
digitalWrite(MotorL2, LOW); // Sol motorun geri hareketi aktif
analogWrite(MotorLE, 150); // Sol motorun hýzý 150
}